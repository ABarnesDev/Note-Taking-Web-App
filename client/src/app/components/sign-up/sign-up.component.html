<div>
  <h1>Sign up</h1>
  <form [formGroup]="signupForm" (ngSubmit)="submitSignupForm()">
    <mat-form-field appearance="outline">
      <mat-label>Name</mat-label>
      <input matInput type="text" placeholder="Enter Name" id="usernameInput" formControlName="username" required>
      <mat-error>Name is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Email</mat-label>
      <input matInput type="email" placeholder="Enter Email" id="emailInput" formControlName="email" required>
      @if (signupForm.controls.email.hasError('emailTaken')) {
        <mat-error>This email is already in use</mat-error>
      } @else {
        <mat-error>Invalid Email</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Password</mat-label>
      <input matInput [type]="passwordVisible ? 'text' : 'password'" placeholder="Enter Password" id="passwordInput" formControlName="password" required>

      <button type="button" (click)="togglePassword()" mat-icon-button matSuffix>
        <mat-icon>{{passwordVisible ? 'visibility' : 'visibility_off'}}</mat-icon>
      </button>

      <mat-hint>Password must contain at least 8 characters, including an uppercase, lowercase, special character (&#64;$!%*?&), and digit, without spaces.</mat-hint>
      <mat-error>Password must contain at least 8 characters, including an uppercase, lowercase, special character (&#64;$!%*?&), and digit, without spaces.</mat-error>
    </mat-form-field>

    <button type="submit" [disabled]="!signupForm.valid">Sign up</button>
  </form>
  <span>Already have an account? <a routerLink="/login">Log in</a></span>
</div>
